!function(t){var e={};function a(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=e,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(o,n,function(e){return t[e]}.bind(null,n));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);var o,n=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(t,e)},function(t,e){function a(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}),r=function(t){function e(){var e=t.call(this)||this;return e._tempVector3=new Laya.Vector3,e.yawPitchRoll=new Laya.Vector3,e.resultRotation=new Laya.Quaternion,e.tempRotationZ=new Laya.Quaternion,e.tempRotationX=new Laya.Quaternion,e.tempRotationY=new Laya.Quaternion,e.rotaionSpeed=6e-5,e}return n(e,t),e.prototype._updateRotation=function(){Math.abs(this.yawPitchRoll.y)<1.5&&(Laya.Quaternion.createFromYawPitchRoll(this.yawPitchRoll.x,this.yawPitchRoll.y,this.yawPitchRoll.z,this.tempRotationZ),this.tempRotationZ.cloneTo(this.camera.transform.localRotation),this.camera.transform.localRotation=this.camera.transform.localRotation)},e.prototype.onAwake=function(){Laya.stage.on(Laya.Event.RIGHT_MOUSE_DOWN,this,this.mouseDown),Laya.stage.on(Laya.Event.RIGHT_MOUSE_UP,this,this.mouseUp),this.camera=this.owner},e.prototype.onUpdate=function(){var t=Laya.timer.delta;if(!isNaN(this.lastMouseX)&&!isNaN(this.lastMouseY)&&this.isMouseDown){this.owner.scene,Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.W)&&this.moveForward(-.01*t),Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.S)&&this.moveForward(.01*t),Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.A)&&this.moveRight(-.01*t),Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.D)&&this.moveRight(.01*t),Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.Q)&&this.moveVertical(.01*t),Laya.KeyBoardManager.hasKeyDown(Laya.Keyboard.E)&&this.moveVertical(-.01*t);var e=Laya.stage.mouseX-this.lastMouseX,a=Laya.stage.mouseY-this.lastMouseY,o=this.yawPitchRoll;o.x-=e*this.rotaionSpeed*t,o.y-=a*this.rotaionSpeed*t,this._updateRotation()}this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY},e.prototype.onDestroy=function(){Laya.stage.off(Laya.Event.RIGHT_MOUSE_UP,this,this.mouseUp)},e.prototype.mouseDown=function(t){this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll),this.lastMouseX=Laya.stage.mouseX,this.lastMouseY=Laya.stage.mouseY,this.isMouseDown=!0},e.prototype.mouseUp=function(t){this.isMouseDown=!1},e.prototype.mouseOut=function(t){this.isMouseDown=!1},e.prototype.moveForward=function(t){this._tempVector3.x=this._tempVector3.y=0,this._tempVector3.z=t,this.camera.transform.translate(this._tempVector3)},e.prototype.moveRight=function(t){this._tempVector3.y=this._tempVector3.z=0,this._tempVector3.x=t,this.camera.transform.translate(this._tempVector3)},e.prototype.moveVertical=function(t){this._tempVector3.x=this._tempVector3.z=0,this._tempVector3.y=t,this.camera.transform.translate(this._tempVector3,!1)},e}(Laya.Script3D),i=function(){function t(t){this._resource=t,Laya3D.init(0,0),console.info("Laya Version: "+Laya.version),Laya.stage.scaleMode=Laya.Stage.SCALE_FULL,Laya.stage.screenMode=Laya.Stage.SCREEN_NONE,Laya.Stat.show(),this._stage=Laya.stage,Laya.loader.create([t],Laya.Handler.create(this,this.preLoadFinish),Laya.Handler.create(this,function(t){console.info("Loading..."+(100*t).toFixed(2)+"%")}))}return t.prototype.preLoadFinish=function(){this._scene=Laya.loader.getRes(this._resource),this._stage.addChild(this._scene),this._camera=this._scene.getChildAt(0),this._camera.addComponent(r)},t}(),s=function(){function t(t){this._resource=t,Laya3D.init(0,0),console.info("Laya Version: "+Laya.version),Laya.stage.scaleMode=Laya.Stage.SCALE_FULL,Laya.stage.screenMode=Laya.Stage.SCREEN_NONE,Laya.Stat.show(),this._stage=Laya.stage,Laya.loader.create([t],Laya.Handler.create(this,this.preLoadFinish),Laya.Handler.create(this,function(t){console.info("Loading..."+(100*t).toFixed(2)+"%")}))}return t.prototype.preLoadFinish=function(){this._scene=new Laya.Scene3D,this._stage.addChild(this._scene);var t=this._scene.addChild(new Laya.DirectionLight);t.color=new Laya.Vector3(1,1,1),t.transform.worldMatrix.setForward(new Laya.Vector3(1,-1,0)),this._camera=new Laya.Camera(0,.1,1e3),this._camera.transform.translate(new Laya.Vector3(0,3,3)),this._camera.transform.rotate(new Laya.Vector3(-30,0,0),!0,!1),this._camera.addComponent(r),this._scene.addChild(this._camera);var e=Laya.loader.getRes(this._resource);e.transform.position=new Laya.Vector3(0,0,0),console.debug(e),this._scene.addChild(e)},t}();window.openScene=function(t){console.info("open "+t),new i(t)},window.openModel=function(t){console.info("open "+t),new s(t)}}]);